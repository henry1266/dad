# d012.bash 功能與 Python 網頁差異分析

## `d012.bash` 主要功能模組：

1.  **環境設定與初始化**：
    *   [ ] 複製範本資料夾 (工具程式、基本資料、HTML參考樣板、投影片參考樣板、易經輸入端)。
    *   [ ] 格式化基本資料文字檔 (空格轉 `&nbsp;`)。
    *   [ ] 清理並建立各種處理過程中的暫存與結果資料夾。
    *   [ ] 動態產生多個 `sed` 腳本檔案 (垃圾字詞清理、專有名詞維基連結、易經標題維基連結等)。

2.  **維基百科資料下載與處理 (自選主題)**：
    *   [ ] 讀取自選專有名詞列表。
    *   [ ] 使用 `w3m` 下載對應維基頁面。
    *   [ ] 清理下載內容 (去空白行、去垃圾字詞、擷取相關段落)。
    *   [ ] 彙整結果至 `自選專有名詞維基文獻.txt` 及 `我的著作文獻部份.txt`。

3.  **易經古文處理**：
    *   [ ] 處理 `yijing.txt`，進行斷句、分段。
    *   [ ] 產生易經元數據檔案：`yijing標題.txt` (Python 已使用此檔案)、`yijing順序.txt`、`yijing順序標題.txt`、`yijing標題列智慧解說.txt`。
    *   [ ] 將易經全文分割為64個獨立的卦文檔案 (`yijing切開第N卦古原文無分斷點.txt`) (Python 已使用此檔案)。

4.  **非互動式投影片生成 (HTML, impress.js 格式)**：
    *   [ ] **類型一：易經各卦全文投影片 (`投影片秀易經古文解析講座$course.html`)**
        *   [ ] 包含基本資料 (執行長學經歷等，目前 Python 網頁有部分類似功能但非完整投影片格式)。
        *   [ ] 逐卦顯示全文或摘要，並提供完整原文連結。
        *   [ ] 使用 HTML 樣板 (`index起段.html`, `index止段.html`) 與 `sed` 腳本組合生成。
    *   [ ] **類型二：易經卦駁段與媽傳記投影片 (`投影片秀易經古文解析講座卦駁段$course.html`)**
        *   [ ] 包含出版社資料、基本資料。
        *   [ ] 組合媽手記相片、記事本、媽文章、生活照、演講、變色盤、易經卦駁段等內容。
        *   [ ] 整合 `m.txt` (媽的寫作內容)。
        *   [ ] 使用 HTML 樣板與 `sed` 腳本組合生成。
    *   [ ] **類型三：易經彖象段投影片 (`投影片秀易經古文解析講座彖象段$course.html`)**
        *   [ ] 包含基本資料。
        *   [ ] 擷取並展示每卦的彖辭與象辭。
        *   [ ] 使用 HTML 樣板與 `sed` 腳本組合生成。

5.  **維基百科資料下載與處理 (易經64卦)**：
    *   [ ] 讀取64卦卦名 (來自 `yijing標題.txt`)。
    *   [ ] 使用 `w3m` 下載對應維基頁面。
    *   [ ] 清理下載內容 (同自選主題處理方式)。
    *   [ ] 彙整結果至 `yijing卦名維基文獻.txt` 及 `我的著作文獻部份.txt`。

6.  **HTML網頁生成 (每卦一個網頁)**：
    *   [ ] 針對特定範圍的卦 (預設為第1-2卦)。
    *   [ ] 組合該卦的古文 (前20列 + 看全文連結)、維基百科資料。
    *   [ ] 內容中專有名詞、易經標題等自動加上維基連結。
    *   [ ] 包含多個外部連結 (谷歌、百度、國家中醫藥研究所、PubMed 等)。
    *   [ ] 使用多種 HTML 樣板 (`HTML參考樣板資料夾現在要用/*/$course.html`) 與 `sed` 腳本組合生成，檔名類似 `fuck$g$i.html`。

7.  **書稿彙整 (`我的著作文獻部份.txt`)**：
    *   [ ] 將處理過的自選主題維基文獻、64卦維基文獻、易經古文等內容逐步附加到此檔案，作為書稿基礎。
    *   [ ] (註解中提及用 LibreOffice Writer 開啟此檔案進行後續編輯)。

8.  **風水個案分析網頁生成**：
    *   [ ] 讀取 `易經個案列表.txt`。
    *   [ ] 讀取個案相關資料檔案。
    *   [ ] 使用 HTML 樣板與 `sed` 腳本組合生成個案分析網頁。

9.  **使用者互動 (腳本中多為註解或硬編碼)**：
    *   [ ] 原設計包含讀取使用者輸入來決定處理範圍 (例如：從第幾列開始、到第幾列結束、選擇第幾個樣板)。目前 Python 網頁無此互動。

10. **清理作業**：
    *   [ ] 移除執行過程中產生的暫存資料夾 (`*現在要用`)。

## Python 互動網頁 (`main.py`) 目前已實現功能：

*   提供一個首頁 (`index.html`)。
*   提供 `/yijing/slides` 路徑，其功能對應 `d012.bash` 的一部分：
    *   讀取 `config_data/基本資料資料夾/` 下的 001-006號檔案作為投影片前幾頁內容。
    *   讀取 `config_data/易經古原文暫存戰果資料夾/yijing標題.txt`。
    *   根據標題讀取對應的 `config_data/易經古原文暫存戰果資料夾/yijing切開第N卦古原文無分斷點.txt`。
    *   顯示每卦原文的前10行。

## Python 網頁主要遺漏功能：

*   **絕大部分的資料前處理與生成邏輯**：Python 網頁目前依賴的是 `d012.bash` 腳本執行後產生的結果檔案。它本身不具備從原始輸入檔案 (如 `yijing.txt`, 各類樣板) 開始處理並生成這些結果檔案的能力。
*   **完整的投影片生成與展示**：目前僅有 `/yijing/slides` 的雛形，缺乏 `d012.bash` 中三種複雜投影片的完整內容生成、樣式、以及 impress.js 的整合。
*   **維基百科資料的自動下載與整合**。
*   **各卦獨立HTML網頁的生成與內容組織**。
*   **風水個案分析模組**。
*   **書稿彙整功能**。
*   **動態 `sed` 腳本生成與應用 (對應的 Python 字串處理與連結生成邏輯)**。
*   **使用者指定處理範圍的互動性**。
*   **完整的資料夾結構複製與管理**。

要使 Python 互動網頁功能與 `d012.bash` 完全一致，需要將 Bash 腳本中大量的檔案操作、文本處理 (sed, grep, awk 等指令)、外部指令呼叫 (`w3m`)、以及迴圈判斷邏輯，全部用 Python 重新實現，並整合到 Flask 框架中，這將是一項非常龐大的系統性重構與開發工作。
